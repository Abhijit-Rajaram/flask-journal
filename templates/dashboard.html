{% extends "base.html" %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>My Journal Entries</h2>
  <a href="{{ url_for('routes.new_entry') }}" class="btn btn-primary">➕ New Entry</a>
</div>

<!-- CSV Download Form -->
<div class="card mb-4">
  <div class="card-body">
    <h5 class="card-title">Download Entries as CSV</h5>
    <form method="POST" action="{{ url_for('routes.download_entries') }}" class="row g-3 align-items-end">
      <div class="col-md-4">
        <label for="from_date" class="form-label">From Date</label>
        <input type="date" name="from_date" id="from_date" class="form-control">
      </div>

      <div class="col-md-4">
        <label for="to_date" class="form-label">To Date</label>
        <input type="date" name="to_date" id="to_date" class="form-control">
      </div>

      <div class="col-md-4">
        <button type="submit" class="btn btn-success w-100">Download CSV</button>
      </div>
    </form>
  </div>
</div>

<!-- Entries List -->
{% if entries %}
  <div class="list-group">
    {% for entry in entries %}
      <a href="{{ url_for('routes.view_entry', id=entry.id) }}" class="list-group-item list-group-item-action">
        <div class="d-flex w-100 justify-content-between">
          <h5 class="mb-1">{{ entry.title }}</h5>
          <small>{{ entry.start_time.strftime("%Y-%m-%d %H:%M") }} → {{ entry.end_time.strftime("%Y-%m-%d %H:%M") }}</small>
        </div>
        <p class="mb-1">{{ entry.description[:120] }}...</p>
        <small class="text-muted">Experience: {{ entry.experience | capitalize }}</small>
      </a>
    {% endfor %}
  </div>
{% else %}
  <p class="text-muted">No entries yet. Start writing!</p>
{% endif %}

{% endblock %}
